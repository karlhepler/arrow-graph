var CircleGraph=function(e,t,n,l,r,s,a,i,c){"use strict";var o=(a>i?i:a)-100,d=50,h=.1,m=100,u=.03*o,C=10,g=.02*o,p=g/2,f=o/2-d,v=3/f,y=f-.5*f,L=3/y,S=f/2+y/2,b=3/S;return function(r){function a(e){M.classList.add("CircleGraph--zoom"),M.style.width=o+"px",M.style.height=o+"px";for(var t=0,n=c.length;t<n;t++)c[t].style.display=null;e.style.display="block",_.classList.remove("CircleModal--hidden")}function i(){for(var e=0,t=N.node().children.length;e<t;e++)N.node().children[e].classList.remove("CircleSection--selected"),c[e].style.display=null;M.classList.remove("CircleGraph--zoom"),M.style.width=null,M.style.height=null,_.classList.add("CircleModal--hidden")}var c=r.getElementsByClassName("CircleModal__section"),E=l/c.length,M=r.getElementsByClassName("CircleGraph")[0],_=r.getElementsByClassName("CircleModal")[0];r.getElementsByClassName("CircleGraph__title")[0].style.fontSize=u+"px",r.getElementsByClassName("CircleGraph__title")[0].style.maxWidth=1.9*y+"px";var G=["rgb(62, 165, 218)","rgb(137, 194, 82)","rgb(68, 176, 84)","rgb(34, 139, 75)","rgb(24, 99, 59)","rgb(55, 175, 115)","rgb(41, 162, 150)","rgb(16, 115, 185)","rgb(144, 146, 195)","rgb(47, 53, 144)","rgb(52, 61, 188)"];r.getElementsByClassName("CircleModal__close-btn")[0].addEventListener("click",function(e){i()});var B={openCircleModal:a,closeCircleModal:i},N=e.select(M).append("svg").attr("class",function(){return setTimeout(function(){M.classList.remove("CircleGraph--hidden")},200),"CircleGraph__svg"}).attr("width",o).attr("height",o).append("g").attr("transform",function(){return"translate("+[f+d,f+d]+")"}),x=N.selectAll("path").data(c).enter().append("g").attr("class","CircleSection CircleSection--hidden").on("mouseenter",function(){this.classList.contains("CircleSection--selected")||this.classList.add("CircleSection--hover")}).on("mouseleave",function(){this.classList.remove("CircleSection--hover")}).on("click",function(e){if(this.classList.remove("CircleSection--hover"),this.classList.contains("CircleSection--selected"))i();else{r.getElementsByClassName("CircleGraph")[0].classList.contains("CircleGraph---zoom")||a(e);for(var t=M.getElementsByClassName("CircleSection"),n=0,l=t.length;n<l;n++)t[n].classList.remove("CircleSection--selected");this.classList.add("CircleSection--selected")}});return x.transition().delay(function(e,t){return t*m}).attr("class","CircleSection"),x.append("path").attr("fill",function(e){var t=~~(s()*G.length),n=G[t];return G.splice(t,1),n}).attr("d",function(l,r){var s=E*r,a=E*(r+1),i=(s+h-2*b+(a+h-2*b))/2;l.centroid=[S*n(i),S*t(i)];var c=e.path();return c.moveTo(f*n(s+v),f*t(s+v)),c.arc(0,0,f,s+v,a-v),c.lineTo(S*n(a+h-b),S*t(a+h-b)),c.arc(0,0,y,a-L,s+L,!0),c.lineTo(S*n(s+h+b),S*t(s+h+b)),c.closePath(),c}),x.append("text").attr("class","CircleSection__label").attr("font-size",g).attr("transform",function(e){return"translate("+e.centroid+")"}).selectAll("tspan").data(function(e){for(var t=e.getElementsByClassName("CircleModal__title")[0].textContent.split(" "),n=[t[0]],l=0,r=1,s=t.length;r<s;r++){var a=n[l]+" "+t[r];a.length<=C?n[l]=a:(n[l]=n[l].trim(),n.push(t[r]),l++)}return n}).enter().append("tspan").attr("x",0).attr("y",function(e,t,n){return g*t-(n.length*g+(n.length-1)*p)/2+p*t}).text(function(e){return e}),B}}(d3,Math.sin,Math.cos,2*Math.PI,Math.SQRT2,Math.random,document.documentElement.clientWidth,document.documentElement.clientHeight);document.addEventListener("DOMContentLoaded",function(e){for(var t=document.getElementsByClassName("Circle"),n=0,l=t.length;n<l;n++)new CircleGraph(t[n])});