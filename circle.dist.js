var CircleGraph=function(e,t,n,l,r,s,i,a){"use strict";var c=document.documentElement.clientHeight-100,o=50,d=.1,h=100,u=10,C=.02*c,m=C/2,p=c/2-o,g=3/p,f=p-.5*p,v=3/f,y=p/2+f/2,L=3/y,S=["rgb(62, 165, 218)","rgb(137, 194, 82)","rgb(68, 176, 84)","rgb(34, 139, 75)","rgb(24, 99, 59)","rgb(55, 175, 115)","rgb(41, 162, 150)"];return function(r){function i(e){_.classList.add("CircleGraph--zoom"),_.style.width=c+"px",_.style.height=c+"px";for(var t=0,n=M.length;t<n;t++)M[t].style.display=null;e.style.display="block",E.classList.remove("CircleModal--hidden")}function a(){for(var e=0,t=B.node().children.length;e<t;e++)B.node().children[e].classList.remove("CircleSection--selected"),M[e].style.display=null;_.classList.remove("CircleGraph--zoom"),_.style.width=null,_.style.height=null,E.classList.add("CircleModal--hidden")}var M=r.getElementsByClassName("CircleModal__section"),b=l/M.length,_=r.getElementsByClassName("CircleGraph")[0],E=r.getElementsByClassName("CircleModal")[0];r.getElementsByClassName("CircleModal__close-btn")[0].addEventListener("click",function(e){a()});var G={openCircleModal:i,closeCircleModal:a},B=e.select(_).append("svg").attr("class",function(){return setTimeout(function(){_.classList.remove("CircleGraph--hidden")},200),"CircleGraph__svg"}).attr("width",c).attr("height",c).append("g").attr("transform",function(){return"translate("+[p+o,p+o]+")"}),N=B.selectAll("path").data(M).enter().append("g").attr("class","CircleSection CircleSection--hidden").on("mouseenter",function(){this.classList.contains("CircleSection--selected")||this.classList.add("CircleSection--hover")}).on("mouseleave",function(){this.classList.remove("CircleSection--hover")}).on("click",function(e){if(this.classList.remove("CircleSection--hover"),this.classList.contains("CircleSection--selected"))a();else{r.getElementsByClassName("CircleGraph")[0].classList.contains("CircleGraph---zoom")||i(e);for(var t=_.getElementsByClassName("CircleSection"),n=0,l=t.length;n<l;n++)t[n].classList.remove("CircleSection--selected");this.classList.add("CircleSection--selected")}});return N.transition().delay(function(e,t){return t*h}).attr("class","CircleSection"),N.append("path").attr("fill",function(e){return S[~~(s()*S.length)]}).attr("d",function(l,r){var s=b*r,i=b*(r+1),a=(s+d-2*L+(i+d-2*L))/2;l.centroid=[y*n(a),y*t(a)];var c=e.path();return c.moveTo(p*n(s+g),p*t(s+g)),c.arc(0,0,p,s+g,i-g),c.lineTo(y*n(i+d-L),y*t(i+d-L)),c.arc(0,0,f,i-v,s+v,!0),c.lineTo(y*n(s+d+L),y*t(s+d+L)),c.closePath(),c}),N.append("text").attr("class","CircleSection__label").attr("font-size",C).attr("transform",function(e){return"translate("+e.centroid+")"}).selectAll("tspan").data(function(e){for(var t=e.getElementsByClassName("CircleModal__title")[0].textContent.split(" "),n=[t[0]],l=0,r=1,s=t.length;r<s;r++){var i=n[l]+" "+t[r];i.length<=u?n[l]=i:(n[l]=n[l].trim(),n.push(t[r]),l++)}return n}).enter().append("tspan").attr("x",0).attr("y",function(e,t,n){return C*t-(n.length*C+(n.length-1)*m)/2+m*t}).text(function(e){return e}),G}}(d3,Math.sin,Math.cos,2*Math.PI,Math.SQRT2,Math.random);